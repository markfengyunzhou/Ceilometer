## 总体架构图
![](https://docs.openstack.org/developer/ceilometer/_images/ceilo-arch.png)

早期的OpenStack监控（遥测telemetry）项目ceilometer被一分为四：

* Ceilometer负责采集计量数据并加工预处理
* Gnocchi主要用来提供资源索引和存储时序计量数据
* Aodh主要提供预警和计量通知服务
* Panko主要提供事件存储服务

促成Ceilometer分裂的主要原因是：
```
早期各类资源的计量数据（即是时间序列数据）（measurement，核心字段是<</span>时间，值>）存储在SQL数据库中的sample表中；随着云环境中需要被监控的资源增多和时间的推移，计量数据的增长变得难以预测；计量数据的使用方面，查询操作首先要从巨大的sample单表中过滤所需条目，然后还会涉及到相关的聚合计算；可想而知，由此带来的性能开销绝对是无法忍受的，并且随着时间的推移这个瓶颈会愈加明显直至奔溃。要解决上述问题方法有很多，比如分表：每个监控指标（Metirc）一张表，那么一个资源可能会有多张表（比如一个instance至少会有cpu，cpu.util，memory，memory.usage，disk.* 等监控指标metrics）；这似乎有点夸张，即使这样都可以接受的话，那么查询时对计量数据的聚合操作也还是个问题。
```
Ceilometer中的每个service都可进行横向扩展，其两个核心服务：

* polling agents : 主动轮询所关心的数据。
* notification agents : 从notification队列抓取各模块上报的数据。

经过polling agents和notification agents处理后的数据可以存储到多种数据库。 Gnocchi
